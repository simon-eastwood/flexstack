(this.webpackJsonpflexstack=this.webpackJsonpflexstack||[]).push([[0],{36:function(e,t,o){},37:function(e,t,o){},53:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),d=o(19),a=o.n(d),c=(o(36),o(31)),r=o(12),s=(o(37),o(38),o(1)),l=function e(t,o){var n=0,i=0;return t.getChildren().forEach((function(d){if(d.getType()===s.TabSetNode.TYPE){var a=function(e,t){var o=0,n=0;if(e.getChildren().forEach((function(e){if(e.getType()!=s.TabNode.TYPE)throw Error("tabset has a child which is not a tab - this is not expected");var t=e;o=Math.max(o,t.getConfig().minHeight),n=Math.max(n,t.getConfig().minWidth)})),t&&(o>0||n>0)){var i=s.Actions.updateNodeAttributes(e.getId(),{minWidth:n,minHeight:o});e.getModel().doAction(i)}return{widthNeeded:n,heightNeeded:o}}(d,o);t.getOrientation()===s.Orientation.HORZ?(n+=a.widthNeeded,i=Math.max(i,a.heightNeeded)):(n=Math.max(n,a.widthNeeded),i+=a.heightNeeded)}else if(d.getType()===s.RowNode.TYPE){var c=e(d,o);t.getOrientation()===s.Orientation.HORZ?(c.widthNeeded&&(n+=c.widthNeeded),c.heightNeeded&&(i=Math.max(i,c.heightNeeded))):(c.widthNeeded&&(n=Math.max(n,c.widthNeeded)),c.heightNeeded&&(i+=c.heightNeeded))}})),{widthNeeded:n,heightNeeded:i}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=void 0,n=void 0,i=e.getRoot();console.log("doign analysis"),e.visitNodes((function(e){o||"tabset"!==e.getType().toLowerCase()||(o=e),!n&&"tabset"===e.getType().toLowerCase()&&e.isActive()&&(n=e)}));var d=l(i,t);console.log("done");var a={model:e,activeTabset:n,prioTabset:o,rootRow:i,widthNeeded:d.widthNeeded,heightNeeded:d.heightNeeded};return console.log(e.toJson()),console.log("SIZE : ".concat(d.heightNeeded," x ").concat(d.widthNeeded)),a},g=function(e){return function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Object(n.useState)(o),d=Object(r.a)(i,2),a=d[0],c=d[1];return e((function(){var e=!0,o=window.matchMedia(t),n=function(){e&&c(Boolean(o.matches))};return o.addListener(n),c(o.matches),function(){e=!1,o.removeListener(n)}}),[t]),a}},u=g(n.useEffect),f=(g(n.useLayoutEffect),u),b=o(4),m=h(s.Model.fromJson({global:{rootOrientationVertical:!1},layout:{type:"row",weight:100,children:[{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"Things to try",component:"text",config:{text:"<ul><li>drag tabs</li><li>drag splitters</li><li>double click on tab to rename</li><li>double click on tabstrip to maximize</li><li>use the Add button to add another tab</li></ul>",minWidth:510,minHeight:350}}]},{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"two",component:"text",config:{text:"",minWidth:510,minHeight:350}}]},{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"three",component:"text",config:{text:"",minWidth:510,minHeight:350}}]}]}}),!0);var v=function(){var e=Object(n.useState)((function(){return m})),t=Object(r.a)(e,2),o=t[0],i=t[1],d=Object(n.useState)(),a=Object(r.a)(d,2),l=a[0],g=a[1],u=Object(n.useState)(!1),v=Object(r.a)(u,2),p=v[0],N=v[1],x=Object(n.useState)("Z"),j=Object(r.a)(x,2),O=j[0],w=j[1],T=(Object(n.useRef)(null),Object(n.useRef)(null)),y=f("(max-width: ".concat(l?l.widthNeeded:o.widthNeeded,"px)"));Object(n.useEffect)((function(){if(o)if(y){var e,t=o.model.toJson(),n=Object(c.a)({},o);n.model=s.Model.fromJson(t),g(n),y&&("Z"===O?(e=function(e){var t=e.activeTabset?e.activeTabset:e.prioTabset,o=[];return e.model.visitNodes((function(e){var n;console.log(e.getType()+" is "+e.getId()),e.getParent()?console.log(" and parent is: "+e.getParent().getId()):console.log("none"),"tab"===e.getType().toLowerCase()&&(null===(n=e.getParent())||void 0===n?void 0:n.getId())!=t.getId()&&o.push(e)})),o.forEach((function(o){var n=s.Actions.moveNode(o.getId(),null===t||void 0===t?void 0:t.getId(),s.DockLocation.CENTER,-1,!1);e.model.doAction(n)})),h(e.model)}(o),N(!1)):e=function(e){var t=e.activeTabset?e.activeTabset:e.prioTabset,o=e.rootRow,n=[];return o&&(e.model.visitNodes((function(e){console.log(e.getType()+" is "+e.getId()),"tabset"===e.getType().toLowerCase()&&e.getId()!=t.getId()&&n.push(e)})),n.forEach((function(t){var n=s.Actions.moveNode(t.getId(),o.getId(),s.DockLocation.BOTTOM,-1);console.log(n),console.log("before parent IS "+t.getParent().getId()),console.log("node is "),console.log(t.toJson()),e.model.doAction(n),console.log("after parent IS "+t.getParent().getId())}))),h(e.model)}(o),i(e))}else l&&(i(l),g(void 0))}),[y]);var I=f("(max-height: ".concat(o.heightNeeded,"px)"));return Object(n.useEffect)((function(){o&&(I?(N(!0),console.log("ABS CANVAS :"+o.heightNeeded)):(N(!1),console.log("REL CANVAS :"+o.heightNeeded)))}),[I]),Object(b.jsxs)("div",{className:"outer",style:p?{height:o.heightNeeded+"px"}:{height:"100%"},children:[Object(b.jsx)("span",{children:" Stacking strategy:"}),Object(b.jsxs)("select",{value:O,onChange:function(e){w(e.target.value)},children:[Object(b.jsx)("option",{value:"Z",children:"Z axis"}),Object(b.jsx)("option",{value:"Y",children:"Y axis"})]}),Object(b.jsx)("button",{onClick:function(e){T.current.addTabWithDragAndDropIndirect("Add panel<br>(Drag to location)",{component:"text",name:"added",config:{text:"i was added",minHeight:300,minWidth:400}},void 0)},children:"Add"}),Object(b.jsx)("div",{className:"inner",children:o&&Object(b.jsx)(s.Layout,{ref:T,onAction:function(e){return console.log(e),setTimeout((function(){i(h(o.model,!0))}),100),e},onModelChange:function(e){console.log("model changed"),console.log(e),i(h(e,!1))},model:o.model,factory:function(e){if("text"===e.getComponent())return Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e.getConfig().text}})}})})]})};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("container"))}},[[53,1,2]]]);
//# sourceMappingURL=main.4e147022.chunk.js.map