(this.webpackJsonpflexstack=this.webpackJsonpflexstack||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),d=n(20),a=n.n(d),c=(n(39),n(33)),r=n(12),h=(n(40),n(41),n(0)),s=n(34),g=function e(t,n){var o=0,i=0;return t.getChildren().forEach((function(d){if(d.getType()===h.TabSetNode.TYPE){var a=function(e,t){var n=0,o=0;if(e.getChildren().forEach((function(e){if(e.getType()!==h.TabNode.TYPE)throw Error("tabset has a child which is not a tab - this is not expected");var t=e;n=Math.max(n,t.getConfig().minHeight),o=Math.max(o,t.getConfig().minWidth)})),t&&(n>0||o>0)&&(e.getMinWidth()!=o||e.getMinHeight()!=n)){var i=h.Actions.updateNodeAttributes(e.getId(),{minWidth:o,minHeight:n});e.getModel().doAction(i)}return{widthNeeded:o,heightNeeded:n}}(d,n);t.getOrientation()===h.Orientation.HORZ?(o+=a.widthNeeded,i=Math.max(i,a.heightNeeded)):(o=Math.max(o,a.widthNeeded),i+=a.heightNeeded)}else if(d.getType()===h.RowNode.TYPE){var c=e(d,n);t.getOrientation()===h.Orientation.HORZ?(c.widthNeeded&&(o+=c.widthNeeded),c.heightNeeded&&(i=Math.max(i,c.heightNeeded))):(c.widthNeeded&&(o=Math.max(o,c.widthNeeded)),c.heightNeeded&&(i+=c.heightNeeded))}})),{widthNeeded:o,heightNeeded:i}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,o=void 0,i=e.getRoot();console.log("Too doing analysis ("+t),e.visitNodes((function(e){n||"tabset"!==e.getType().toLowerCase()||(n=e),!o&&"tabset"===e.getType().toLowerCase()&&e.isActive()&&(o=e)}));var d=g(i,t);console.log("done");var a={model:e,activeTabset:o,lowestPrioTabset:n,rootRow:i,widthNeeded:d.widthNeeded,heightNeeded:d.heightNeeded};return console.log(e.toJson()),console.log("SIZE : ".concat(d.heightNeeded," x ").concat(d.widthNeeded)),a},f=function(e){var t=e.model.toJson(),n=Object(s.a)({},e);return n.model=h.Model.fromJson(t),n},u=function(e){var t=-1,n=new Map,o=0;if(e.visitNodes((function(e){var i;if("tabset"===e.getType()&&(o++,null===(i=e.getConfig())||void 0===i?void 0:i.panel)){var d=e,a=d.getConfig().panel;n.set(a,d),t=a>t?a:t}})),o<2)return e;if(n.size>0){var i=h.Actions.moveNode(n.get(t).getId(),e.getRoot().getId(),h.DockLocation.BOTTOM,-1,!1);e.doAction(i)}return e},p=function(e,t){var n=-1,o=new Map,i=0;if(e.visitNodes((function(e){var t;if("tabset"===e.getType()&&(i++,null===(t=e.getConfig())||void 0===t?void 0:t.panel)){var d=e,a=d.getConfig().panel;o.set(a,d),n=a>n?a:n}})),n=t||n,i<2)return e;if(o.size>0)o.forEach((function(t,i){if(i>=n){var d=new Map;t.getChildren().forEach((function(e){var t=-1;("tab"===e.getType()&&e.getConfig().panelPreferences&&(t=e.getConfig().panelPreferences[n-2]),-1===t)&&(t=Array.from(o.keys())[0]);d.set(e,o.get(t))})),d.forEach((function(t,n){var o=h.Actions.moveNode(n.getId(),t.getId(),h.DockLocation.CENTER,-1,!1);e.doAction(o)}));var a=h.Actions.deleteTabset(t.getId());e.doAction(a)}}));else{var d=!1;e.visitNodes((function(t){if(!d&&"tabset"===t.getType()&&!t.isActive()){var n=h.Actions.deleteTabset(t.getId());e.doAction(n),d=!0}}))}return console.log("done removing tabset"),e},m=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Object(o.useState)(n),d=Object(r.a)(i,2),a=d[0],c=d[1];return e((function(){var e=!0,n=window.matchMedia(t),o=function(){e&&c(Boolean(n.matches))};return n.addListener(o),c(n.matches),function(){e=!1,n.removeListener(o)}}),[t]),a}},v=m(o.useEffect),b=(m(o.useLayoutEffect),v),N={global:{rootOrientationVertical:!1},layout:{type:"row",weight:100,children:[{type:"tabset",weight:50,selected:0,config:{panel:1},children:[{type:"tab",name:"Comm",component:"text",config:{text:"Comm",minWidth:510,minHeight:350,panelPreferences:[1,1,1,1,1]}}]},{type:"tabset",weight:50,selected:0,config:{panel:2},children:[{type:"tab",name:"Letter",component:"text",config:{text:"Letter",minWidth:510,minHeight:350,panelPreferences:[1,1,2,2,2]}}]},{type:"tabset",weight:50,selected:0,config:{panel:3},children:[{type:"tab",name:"Claims",component:"text",config:{text:"Claims",minWidth:510,minHeight:350,panelPreferences:[1,2,3,3,3]}}]},{type:"tabset",weight:50,selected:0,config:{panel:4},children:[{type:"tab",name:"Fig",component:"text",config:{text:"Fig",minWidth:510,minHeight:350,panelPreferences:[1,1,1,1,4]}}]},{type:"tabset",weight:50,selected:0,config:{panel:5},children:[{type:"tab",name:"AppAn",component:"text",config:{text:"AppAn",minWidth:510,minHeight:350,panelPreferences:[1,2,3,4,5]}}]}]}},w=function(e,t){var n=h.Model.fromJson(N);return t&&(n=e===h.DockLocation.BOTTOM?u(n):p(n,t+1)),l(n,!0)},j=n(2);var x=function(){var e=Object(o.useState)((function(){return[w(h.DockLocation.CENTER)]})),t=Object(r.a)(e,2),n=t[0],i=t[1],d=Object(o.useState)(5),a=Object(r.a)(d,2),s=a[0],g=a[1],m=Object(o.useState)({height:!1,width:!1}),v=Object(r.a)(m,2),N=v[0],x=v[1],T=Object(o.useState)("Z"),O=Object(r.a)(T,2),y=O[0],E=O[1],C=Object(o.useRef)(null),A=n[n.length-1],I=function(e){i(e)},M=function(e){var t=f(A),o=t.widthNeeded,i=Object(c.a)(n);do{var d=void 0;d=e===h.DockLocation.BOTTOM?u(t.model):p(t.model),(t=l(d)).widthNeeded!==o&&i.push(t),t=f(t)}while(t.widthNeeded!==o&&t.widthNeeded>window.innerWidth);I(i)},k=b("(max-width: ".concat(A.widthNeeded,"px)"));Object(o.useEffect)((function(){if(k)switch(console.log("Too Narrow "+A.widthNeeded),y){case"X":x({height:!1,width:!0});break;case"Y":console.log("Y STACK"),M(h.DockLocation.BOTTOM);break;case"Z":M(h.DockLocation.CENTER),x({height:!1,width:!1})}else"X"===y&&x({height:!1,width:!1})}),[k]);var L=n.length>1?n[n.length-2].widthNeeded:9999999999,P=b("(min-width: ".concat(L,"px"));Object(o.useEffect)((function(){P&&(function(e,t){var n,o=[];console.log("migrating model"),console.log(e),console.log(t),t.model.visitNodes((function(t){t.getType()===h.TabNode.TYPE?e.model.getNodeById(t.getId())||o.push(h.Actions.deleteTab(t.getId())):t.getType()===h.TabSetNode.TYPE&&(n=t)})),e.model.visitNodes((function(e){if(e.getType()===h.TabNode.TYPE&&!t.model.getNodeById(e.getId())){var i=e.getParent();i.getType()===h.TabSetNode.TYPE&&t.model.getNodeById(i.getId())?o.push(h.Actions.addNode(e.toJson(),i.getId(),h.DockLocation.CENTER,-1,!1)):n?o.push(h.Actions.addNode(e.toJson(),n.getId(),h.DockLocation.CENTER,-1,!1)):o.push(h.Actions.addNode(e.toJson(),t.model.getRoot().getId(),h.DockLocation.RIGHT,-1,!1))}})),o.forEach((function(e){t.model.doAction(e)}))}(A,n[n.length-2]),function(){var e=n.slice(0,-1);i(e)}())}),[P]);var R=b("(max-height: ".concat(A.heightNeeded,"px)"));Object(o.useEffect)((function(){A&&x(R?{height:!0,width:N.width}:{height:!1,width:N.width})}),[R]);var D={height:N.height?A.heightNeeded+"px":"100%",width:N.width?A.widthNeeded+"px":"100%"};return Object(j.jsxs)("div",{className:"outer",style:D,children:[Object(j.jsx)("button",{onClick:function(e){C.current.addTabWithDragAndDropIndirect("Add panel<br>(Drag to location)",{component:"text",name:"added",config:{text:"i was added",minHeight:300,minWidth:400}},void 0)},children:"Add Panel"}),Object(j.jsx)("span",{children:" Stacking strategy:"}),Object(j.jsxs)("select",{value:y,onChange:function(e){x({height:!1,width:!1}),E(e.target.value)},children:[Object(j.jsx)("option",{value:"X",children:"X axis"}),Object(j.jsx)("option",{value:"Y",children:"Y axis"}),Object(j.jsx)("option",{value:"Z",children:"Z axis"})]}),Object(j.jsx)("span",{children:" Number of Panels:"}),Object(j.jsxs)("select",{value:s,onChange:function(e){console.log("loading ... "),g(parseInt(e.target.value)),I([w(h.DockLocation.CENTER,parseInt(e.target.value))])},children:[Object(j.jsx)("option",{value:"1",children:"1"}),Object(j.jsx)("option",{value:"2",children:"2"}),Object(j.jsx)("option",{value:"3",children:"3"}),Object(j.jsx)("option",{value:"4",children:"4"}),Object(j.jsx)("option",{value:"5",children:"5"})]}),Object(j.jsx)("div",{className:"inner",children:A&&Object(j.jsx)(h.Layout,{ref:C,onAction:function(e){return setTimeout((function(){n[n.length-1]=l(A.model,!0)}),100),e},onModelChange:function(e){n[n.length-1]=l(A.model,!1)},model:A.model,factory:function(e){if("text"===e.getComponent())return Object(j.jsx)("div",{dangerouslySetInnerHTML:{__html:e.getConfig().text}})}})})]})};a.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("container"))}},[[56,1,2]]]);
//# sourceMappingURL=main.d6c63dec.chunk.js.map