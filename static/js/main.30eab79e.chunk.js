(this.webpackJsonpflexstack=this.webpackJsonpflexstack||[]).push([[0],{36:function(e,t,o){},37:function(e,t,o){},53:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),d=o(19),c=o.n(d),a=(o(36),o(12)),h=(o(37),o(38),o(1)),l=o(31),s=function e(t,o){var n=0,i=0;return t.getChildren().forEach((function(d){if(d.getType()===h.TabSetNode.TYPE){var c=function(e,t){var o=0,n=0;if(e.getChildren().forEach((function(e){if(e.getType()!==h.TabNode.TYPE)throw Error("tabset has a child which is not a tab - this is not expected");var t=e;o=Math.max(o,t.getConfig().minHeight),n=Math.max(n,t.getConfig().minWidth)})),t&&(o>0||n>0)&&(e.getMinWidth()!=n||e.getMinHeight()!=o)){var i=h.Actions.updateNodeAttributes(e.getId(),{minWidth:n,minHeight:o});e.getModel().doAction(i)}return{widthNeeded:n,heightNeeded:o}}(d,o);t.getOrientation()===h.Orientation.HORZ?(n+=c.widthNeeded,i=Math.max(i,c.heightNeeded)):(n=Math.max(n,c.widthNeeded),i+=c.heightNeeded)}else if(d.getType()===h.RowNode.TYPE){var a=e(d,o);t.getOrientation()===h.Orientation.HORZ?(a.widthNeeded&&(n+=a.widthNeeded),a.heightNeeded&&(i=Math.max(i,a.heightNeeded))):(a.widthNeeded&&(n=Math.max(n,a.widthNeeded)),a.heightNeeded&&(i+=a.heightNeeded))}})),{widthNeeded:n,heightNeeded:i}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=void 0,n=void 0,i=e.getRoot();console.log("Too doing analysis ("+t),e.visitNodes((function(e){o||"tabset"!==e.getType().toLowerCase()||(o=e),!n&&"tabset"===e.getType().toLowerCase()&&e.isActive()&&(n=e)}));var d=s(i,t);console.log("done");var c={model:e,activeTabset:n,prioTabset:o,rootRow:i,widthNeeded:d.widthNeeded,heightNeeded:d.heightNeeded};return console.log(e.toJson()),console.log("SIZE : ".concat(d.heightNeeded," x ").concat(d.widthNeeded)),c},r=function(e){return function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Object(n.useState)(o),d=Object(a.a)(i,2),c=d[0],h=d[1];return e((function(){var e=!0,o=window.matchMedia(t),n=function(){e&&h(Boolean(o.matches))};return o.addListener(n),h(o.matches),function(){e=!1,o.removeListener(n)}}),[t]),c}},u=r(n.useEffect),f=(r(n.useLayoutEffect),u),m=o(3),b=g(h.Model.fromJson({global:{rootOrientationVertical:!1},layout:{type:"row",weight:100,children:[{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"Things to try",component:"text",config:{text:"<ul><li>drag tabs</li><li>drag splitters</li><li>double click on tab to rename</li><li>double click on tabstrip to maximize</li><li>use the Add button to add another tab</li></ul>",minWidth:510,minHeight:350}}]},{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"two",component:"text",config:{text:"",minWidth:510,minHeight:350}}]},{type:"tabset",weight:50,selected:0,children:[{type:"tab",name:"three",component:"text",config:{text:"",minWidth:510,minHeight:350}}]}]}}),!0);var p=function(){var e=Object(n.useState)([b]),t=Object(a.a)(e,1)[0],o=Object(n.useState)((function(){return t[0]})),i=Object(a.a)(o,2),d=i[0],c=i[1],s=Object(n.useState)({height:!1,width:!1}),r=Object(a.a)(s,2),u=r[0],p=r[1],v=Object(n.useState)("Z"),N=Object(a.a)(v,2),w=N[0],T=N[1],x=(Object(n.useRef)(null),Object(n.useRef)(null)),j=function(){c(t[t.length-1])},O=f("(max-width: ".concat(d.widthNeeded,"px)"));Object(n.useEffect)((function(){if(console.log("Too narrow: ".concat(O," ").concat(d.widthNeeded)),O){var e,o=function(e){var t=e.model.toJson(),o=Object(l.a)({},e);return o.model=h.Model.fromJson(t),o}(d);switch(w){case"X":p({height:!1,width:!0});break;case"Y":e=function(e){var t=e.activeTabset?e.activeTabset:e.prioTabset,o=e.rootRow,n=[],i=!1;return o&&(e.model.visitNodes((function(e){console.log(e.getType()+" is "+e.getId()),"tabset"===e.getType().toLowerCase()&&e.getId()!==t.getId()&&n.push(e)})),n.forEach((function(t){var n=h.Actions.moveNode(t.getId(),o.getId(),h.DockLocation.BOTTOM,-1);console.log(n),console.log("before parent IS "+t.getParent().getId()),console.log("node is "),console.log(t.toJson()),e.model.doAction(n),i=!0,console.log("after parent IS "+t.getParent().getId())}))),i?g(e.model):void 0}(o);break;case"Z":e=function(e){var t=e.activeTabset?e.activeTabset:e.prioTabset,o=[],n=!1;return e.model.visitNodes((function(e){var n;console.log(e.getType()+" is "+e.getId()),e.getParent()?console.log(" and parent is: "+e.getParent().getId()):console.log("none"),"tab"===e.getType().toLowerCase()&&(null===(n=e.getParent())||void 0===n?void 0:n.getId())!==t.getId()&&o.push(e)})),o.forEach((function(o){var i=h.Actions.moveNode(o.getId(),null===t||void 0===t?void 0:t.getId(),h.DockLocation.CENTER,-1,!1);e.model.doAction(i),n=!0})),n?g(e.model):void 0}(o),p({height:!1,width:!1})}e&&(t.push(e),console.log("Too Switching to NEW model: "+t.length),j())}else"X"===w&&p({height:!1,width:!1})}),[O]);var y=t.length>1?t[t.length-2].widthNeeded:9999999999,I=f("(min-width: ".concat(y,"px"));Object(n.useEffect)((function(){console.log("Too wide: ".concat(I," ").concat(y," (looking at ").concat(t.length-2,")")),I&&(console.log("Too Switching BACK to  model: "+(t.length-2)),function(e,t){var o,n=[];console.log("migrating model"),t.model.visitNodes((function(t){t.getType()===h.TabNode.TYPE?e.model.getNodeById(t.getId())||n.push(h.Actions.deleteTab(t.getId())):t.getType()===h.TabSetNode.TYPE&&(o=t)})),e.model.visitNodes((function(e){if(e.getType()===h.TabNode.TYPE&&!t.model.getNodeById(e.getId())){var i=e.getParent();i.getType()===h.TabSetNode.TYPE&&t.model.getNodeById(i.getId())?n.push(h.Actions.addNode(e.toJson(),i.getId(),h.DockLocation.CENTER,-1,!1)):o?n.push(h.Actions.addNode(e.toJson(),o.getId(),h.DockLocation.CENTER,-1,!1)):n.push(h.Actions.addNode(e.toJson(),t.model.getRoot().getId(),h.DockLocation.RIGHT,-1,!1))}})),n.forEach((function(e){t.model.doAction(e)}))}(d,t[t.length-2]),t.pop(),j())}),[I]);var E=f("(max-height: ".concat(d.heightNeeded,"px)"));Object(n.useEffect)((function(){d&&(E?(p({height:!0,width:u.width}),console.log("ABS CANVAS :"+d.heightNeeded)):(p({height:!1,width:u.width}),console.log("REL CANVAS :"+d.heightNeeded)))}),[E]);var A={height:u.height?d.heightNeeded+"px":"100%",width:u.width?d.widthNeeded+"px":"100%"};return Object(m.jsxs)("div",{className:"outer",style:A,children:[Object(m.jsx)("span",{children:" Stacking strategy:"}),Object(m.jsxs)("select",{value:w,onChange:function(e){p({height:!1,width:!1}),T(e.target.value)},children:[Object(m.jsx)("option",{value:"X",children:"X axis"}),Object(m.jsx)("option",{value:"Y",children:"Y axis"}),Object(m.jsx)("option",{value:"Z",children:"Z axis"})]}),Object(m.jsx)("button",{onClick:function(e){x.current.addTabWithDragAndDropIndirect("Add panel<br>(Drag to location)",{component:"text",name:"added",config:{text:"i was added",minHeight:300,minWidth:400}},void 0)},children:"Add"}),Object(m.jsx)("div",{className:"inner",children:d&&Object(m.jsx)(h.Layout,{ref:x,onAction:function(e){return console.log(e),setTimeout((function(){console.log("Too timer..."),t[t.length-1]=g(d.model,!0),j()}),100),e},onModelChange:function(e){console.log("Too model changed"),console.log(e),t[t.length-1]=g(d.model,!1),j()},model:d.model,factory:function(e){if("text"===e.getComponent())return Object(m.jsx)("div",{dangerouslySetInnerHTML:{__html:e.getConfig().text}})}})})]})};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(p,{})}),document.getElementById("container"))}},[[53,1,2]]]);
//# sourceMappingURL=main.30eab79e.chunk.js.map