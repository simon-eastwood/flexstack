(this.webpackJsonpflexstack=this.webpackJsonpflexstack||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),d=n(19),c=n.n(d),a=(n(36),n(9)),r=(n(37),n(38),n(1)),h=n(31),l=function e(t,n){var o=0,i=0;return t.getChildren().forEach((function(d){if(d.getType()===r.TabSetNode.TYPE){var c=function(e,t){var n=0,o=0;if(e.getChildren().forEach((function(e){if(e.getType()!==r.TabNode.TYPE)throw Error("tabset has a child which is not a tab - this is not expected");var t=e;n=Math.max(n,t.getConfig().minHeight),o=Math.max(o,t.getConfig().minWidth)})),t&&(n>0||o>0)&&(e.getMinWidth()!=o||e.getMinHeight()!=n)){var i=r.Actions.updateNodeAttributes(e.getId(),{minWidth:o,minHeight:n});e.getModel().doAction(i)}return{widthNeeded:o,heightNeeded:n}}(d,n);t.getOrientation()===r.Orientation.HORZ?(o+=c.widthNeeded,i=Math.max(i,c.heightNeeded)):(o=Math.max(o,c.widthNeeded),i+=c.heightNeeded)}else if(d.getType()===r.RowNode.TYPE){var a=e(d,n);t.getOrientation()===r.Orientation.HORZ?(a.widthNeeded&&(o+=a.widthNeeded),a.heightNeeded&&(i=Math.max(i,a.heightNeeded))):(a.widthNeeded&&(o=Math.max(o,a.widthNeeded)),a.heightNeeded&&(i+=a.heightNeeded))}})),{widthNeeded:o,heightNeeded:i}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,o=void 0,i=e.getRoot();console.log("Too doing analysis ("+t),e.visitNodes((function(e){n||"tabset"!==e.getType().toLowerCase()||(n=e),!o&&"tabset"===e.getType().toLowerCase()&&e.isActive()&&(o=e)}));var d=l(i,t);console.log("done");var c={model:e,activeTabset:o,lowestPrioTabset:n,rootRow:i,widthNeeded:d.widthNeeded,heightNeeded:d.heightNeeded};return console.log(e.toJson()),console.log("SIZE : ".concat(d.heightNeeded," x ").concat(d.widthNeeded)),c},g=function(e){var t=e.model.toJson(),n=Object(h.a)({},e);return n.model=r.Model.fromJson(t),n},u=function(e,t,n){var o=-1,i=new Map,d=0;if(console.log("Removing tabset..."),e.visitNodes((function(e){var t;if("tabset"===e.getType()&&(d++,null===(t=e.getConfig())||void 0===t?void 0:t.panel)){var n=e,c=n.getConfig().panel;i.set(c,n),o=c>o?c:o}})),o=n||o,d<2)return e;if(i.size>0)i.forEach((function(t,n){if(n>=o){var d=new Map;t.getChildren().forEach((function(e){var t=-1;("tab"===e.getType()&&e.getConfig().panelPreferenceOrder&&(t=e.getConfig().panelPreferenceOrder.reduce((function(e,t){return e<o?e:t}))),-1===t)&&(t=Array.from(i.keys())[0]);d.set(e,i.get(t))})),d.forEach((function(t,n){var o=r.Actions.moveNode(n.getId(),t.getId(),r.DockLocation.CENTER,-1,!1);e.doAction(o)}));var c=r.Actions.deleteTabset(t.getId());e.doAction(c)}}));else{var c=!1;e.visitNodes((function(t){if(!c&&"tabset"===t.getType()&&!t.isActive()){var n=r.Actions.deleteTabset(t.getId());e.doAction(n),c=!0}}))}return console.log("done removing tabset"),e},f=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Object(o.useState)(n),d=Object(a.a)(i,2),c=d[0],r=d[1];return e((function(){var e=!0,n=window.matchMedia(t),o=function(){e&&r(Boolean(n.matches))};return n.addListener(o),r(n.matches),function(){e=!1,n.removeListener(o)}}),[t]),c}},b=f(o.useEffect),p=(f(o.useLayoutEffect),b),m={global:{rootOrientationVertical:!1},layout:{type:"row",weight:100,children:[{type:"tabset",weight:50,selected:0,config:{panel:1},children:[{type:"tab",name:"One",component:"text",config:{text:"<ul><li>drag tabs</li><li>drag splitters</li><li>double click on tab to rename</li><li>double click on tabstrip to maximize</li><li>use the Add button to add another tab</li></ul>",minWidth:510,minHeight:350,panelPreferenceOrder:[1]}}]},{type:"tabset",weight:50,selected:0,config:{panel:3},children:[{type:"tab",name:"three",component:"text",config:{text:"this is tab three",minWidth:510,minHeight:350,panelPreferenceOrder:[3,2,1]}}]},{type:"tabset",weight:50,selected:0,config:{panel:2},children:[{type:"tab",name:"two",component:"text",config:{text:"this is tab two",minWidth:510,minHeight:350,panelPreferenceOrder:[2,1]}}]},{type:"tabset",weight:50,selected:0,config:{panel:4},children:[{type:"tab",name:"four",component:"text",config:{text:"this is tab four",minWidth:510,minHeight:350,panelPreferenceOrder:[4,3,2,1]}}]},{type:"tabset",weight:50,selected:0,config:{panel:5},children:[{type:"tab",name:"five",component:"text",config:{text:"this is tab five",minWidth:510,minHeight:350,panelPreferenceOrder:[5,4,3,2,1]}}]}]}},v=function(e,t){var n=r.Model.fromJson(m);return t&&(n=u(n,0,t+1)),s(n,!0)},w=n(2);var N=function(){var e=Object(o.useState)((function(){return[v(r.DockLocation.CENTER)]})),t=Object(a.a)(e,2),n=t[0],i=t[1],d=Object(o.useState)((function(){return n[0]})),c=Object(a.a)(d,2),h=c[0],l=c[1],f=Object(o.useState)(5),b=Object(a.a)(f,2),m=b[0],N=b[1],j=Object(o.useState)({height:!1,width:!1}),x=Object(a.a)(j,2),O=x[0],T=x[1],y=Object(o.useState)("Z"),E=Object(a.a)(y,2),A=E[0],C=E[1],M=Object(o.useRef)(null),k=function(){l(n[n.length-1])},P=function(e){var t=g(h),o=t.widthNeeded;do{var d=u(t.model);(t=s(d)).widthNeeded!=o&&(n.push(t),i(n)),t=g(t)}while(t.widthNeeded!=o&&t.widthNeeded>window.innerWidth);k()},R=p("(max-width: ".concat(h.widthNeeded,"px)"));Object(o.useEffect)((function(){if(R)switch(console.log("Too Narrow "+h.widthNeeded),A){case"X":T({height:!1,width:!0});break;case"Y":P(r.DockLocation.BOTTOM);break;case"Z":P(r.DockLocation.CENTER),T({height:!1,width:!1})}else"X"===A&&T({height:!1,width:!1})}),[R]);var S=n.length>1?n[n.length-2].widthNeeded:9999999999;console.log("===> too wide is "+S);var L=p("(min-width: ".concat(S,"px"));Object(o.useEffect)((function(){console.log("Too wide: ".concat(L," ").concat(S," (looking at ").concat(n.length-2,")")),L&&(n.pop(),i(n),k())}),[L]);var H=p("(max-height: ".concat(h.heightNeeded,"px)"));Object(o.useEffect)((function(){h&&(H?(T({height:!0,width:O.width}),console.log("ABS CANVAS :"+h.heightNeeded)):(T({height:!1,width:O.width}),console.log("REL CANVAS :"+h.heightNeeded)))}),[H]);var D={height:O.height?h.heightNeeded+"px":"100%",width:O.width?h.widthNeeded+"px":"100%"};return console.log("===RENDERING : "+n.length+" "+n[n.length-1].widthNeeded),console.log("==== current model width is "+h.widthNeeded),console.log(h),Object(w.jsxs)("div",{className:"outer",style:D,children:[Object(w.jsx)("button",{onClick:function(e){M.current.addTabWithDragAndDropIndirect("Add panel<br>(Drag to location)",{component:"text",name:"added",config:{text:"i was added",minHeight:300,minWidth:400}},void 0)},children:"Add Panel"}),Object(w.jsx)("span",{children:" Stacking strategy:"}),Object(w.jsxs)("select",{value:A,onChange:function(e){T({height:!1,width:!1}),C(e.target.value)},children:[Object(w.jsx)("option",{value:"X",children:"X axis"}),Object(w.jsx)("option",{value:"Y",children:"Y axis"}),Object(w.jsx)("option",{value:"Z",children:"Z axis"})]}),Object(w.jsx)("span",{children:" Number of Panels:"}),Object(w.jsxs)("select",{value:m,onChange:function(e){console.log("loading ... "),N(parseInt(e.target.value)),i([v(r.DockLocation.CENTER,m)]),k(),console.log("set current model "),console.log(n),console.log("===UPDATED")},children:[Object(w.jsx)("option",{value:"1",children:"1"}),Object(w.jsx)("option",{value:"2",children:"2"}),Object(w.jsx)("option",{value:"3",children:"3"}),Object(w.jsx)("option",{value:"4",children:"4"}),Object(w.jsx)("option",{value:"5",children:"5"})]}),Object(w.jsx)("div",{className:"inner",children:h&&Object(w.jsx)(r.Layout,{ref:M,onAction:function(e){return console.log(e),setTimeout((function(){console.log("Too timer..."),n[n.length-1]=s(h.model,!0)}),100),e},onModelChange:function(e){console.log("Too model changed"),console.log(e),n[n.length-1]=s(h.model,!1)},model:h.model,factory:function(e){if("text"===e.getComponent())return Object(w.jsx)("div",{dangerouslySetInnerHTML:{__html:e.getConfig().text}})}})})]})};c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(N,{})}),document.getElementById("container"))}},[[53,1,2]]]);
//# sourceMappingURL=main.001a5c45.chunk.js.map